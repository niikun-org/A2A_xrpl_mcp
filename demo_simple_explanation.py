"""
A2A Trace Anchoring - ã‚ã‹ã‚Šã‚„ã™ã„ãƒ‡ãƒ¢

ã“ã®ãƒ‡ãƒ¢ã¯ã€A2Aãƒˆãƒ¬ãƒ¼ã‚¹ã‚¢ãƒ³ã‚«ãƒªãƒ³ã‚°ã®ä»•çµ„ã¿ã‚’ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã§
è¦–è¦šçš„ã«ã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜ã—ã¾ã™ã€‚
"""

import time
import json
from pathlib import Path


def print_header(text: str, char: str = "="):
    """ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¡¨ç¤º"""
    width = 70
    print(f"\n{char * width}")
    print(f"{text:^{width}}")
    print(f"{char * width}\n")


def print_step(step_num: int, title: str):
    """ã‚¹ãƒ†ãƒƒãƒ—ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¡¨ç¤º"""
    print(f"\n{'='*70}")
    print(f"ã‚¹ãƒ†ãƒƒãƒ— {step_num}: {title}")
    print(f"{'='*70}\n")
    time.sleep(1)


def print_box(content: str, title: str = ""):
    """ãƒœãƒƒã‚¯ã‚¹ã§å›²ã‚“ã§è¡¨ç¤º"""
    lines = content.split("\n")
    max_len = max(len(line) for line in lines)
    width = max(max_len, len(title)) + 4

    print(f"â•”{'â•' * width}â•—")
    if title:
        print(f"â•‘ {title:<{width-2}} â•‘")
        print(f"â• {'â•' * width}â•£")

    for line in lines:
        print(f"â•‘ {line:<{width-2}} â•‘")

    print(f"â•š{'â•' * width}â•")


def print_arrow():
    """çŸ¢å°ã‚’è¡¨ç¤º"""
    print("\n    â†“â†“â†“\n")
    time.sleep(0.5)


def demo_explanation():
    """ãƒ‡ãƒ¢ã®èª¬æ˜"""

    print_header("ğŸ¤– A2A Trace Anchoring ã¨ã¯ï¼Ÿ", "=")

    print("""
ã“ã‚Œã¯ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡Œè¨˜éŒ²ï¼ˆãƒˆãƒ¬ãƒ¼ã‚¹ï¼‰ã‚’
ã€Œæ”¹ã–ã‚“ä¸å¯èƒ½ã€ãªå½¢ã§è¨˜éŒ²ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

ğŸ¯ ç›®çš„:
  ãƒ»AIãŒä½•ã‚’ã—ãŸã‹ã€èª°ã‚‚å¾Œã‹ã‚‰æ”¹ã–ã‚“ã§ããªã„
  ãƒ»ç¬¬ä¸‰è€…ãŒæ¤œè¨¼ã§ãã‚‹é€æ˜æ€§
  ãƒ»åˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§æ°¸ç¶šçš„ã«ä¿å­˜

ğŸ“ ä½¿ç”¨ä¾‹:
  ãƒ»åŒ»ç™‚AIã®è¨ºæ–­è¨˜éŒ²
  ãƒ»é‡‘èAIã®å–å¼•è¨˜éŒ²
  ãƒ»æ³•çš„è¨¼æ‹ ã¨ã—ã¦ã®AIå®Ÿè¡Œè¨˜éŒ²
""")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_step1_agent_execution():
    """ã‚¹ãƒ†ãƒƒãƒ—1: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ"""

    print_step(1, "AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®Ÿè¡Œ")

    print("ğŸ“Œ ä»Šå›ã®ãƒ‡ãƒ¢: Haikuã‚’ç”Ÿæˆã™ã‚‹AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ\n")

    print_box("""
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œè©©ã‚’æ›¸ã„ã¦ãã ã•ã„ã€
    â†“
AI: ãƒ„ãƒ¼ãƒ«ã€Œcheck_haiku_linesã€ã‚’å‘¼ã³å‡ºã—
    â†“
AI: Haikuã‚’ç”Ÿæˆ
    â†“
çµæœ: ã€ŒField lights bite the dusk
      Fans roar, drums call through the stands
      Glory tastes of rainã€
""", "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¼šè©±ãƒ•ãƒ­ãƒ¼")

    print("\nğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ:")
    print("  ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨AIã®å…¨ã¦ã®ã‚„ã‚Šã¨ã‚Šã‚’è¨˜éŒ²")
    print("  ãƒ»ãƒ„ãƒ¼ãƒ«ã®å‘¼ã³å‡ºã—ã‚‚å…¨ã¦è¨˜éŒ²")
    print("  ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡ã‚‚è¨˜éŒ²")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_step2_a2a_format():
    """ã‚¹ãƒ†ãƒƒãƒ—2: A2Aå½¢å¼ã«å¤‰æ›"""

    print_step(2, "A2Aæ¨™æº–å½¢å¼ã«å¤‰æ›")

    print("ğŸ“‹ A2Aå½¢å¼ã¨ã¯ï¼Ÿ")
    print("  â†’ AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¨˜éŒ²ã™ã‚‹ã€Œå›½éš›æ¨™æº–ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€")
    print("  â†’ èª°ã§ã‚‚èª­ã‚ã‚‹ãƒ»æ¤œè¨¼ã§ãã‚‹JSONå½¢å¼\n")

    sample_trace = {
        "traceVersion": "a2a-0.1",
        "session": {
            "id": "session-abc123",
            "createdAt": "2025-11-03T12:00:00Z",
            "actors": ["user", "assistant", "tool:check_haiku_lines"]
        },
        "model": {
            "name": "gpt-5-nano-2025-08-07",
            "provider": "openai"
        },
        "events": [
            {"type": "human_message", "content": "please write a poem."},
            {"type": "ai_tool_call", "tool": "check_haiku_lines"},
            {"type": "tool_result", "content": "Correct!!"},
            {"type": "ai_message", "content": "Field lights bite..."}
        ],
        "usage": [
            {"turn": 1, "input_tokens": 171, "output_tokens": 1391}
        ]
    }

    print("ğŸ“„ å¤‰æ›å¾Œã®A2A JSON:")
    print_box(json.dumps(sample_trace, indent=2, ensure_ascii=False)[:400] + "\n  ...(çœç•¥)", "trace.json")

    print("\nğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ:")
    print("  ãƒ»å…¨ã¦ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒæ™‚ç³»åˆ—ã§è¨˜éŒ²")
    print("  ãƒ»ãƒ¢ãƒ‡ãƒ«åã€ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚‚è¨˜éŒ²")
    print("  ãƒ»æ¨™æº–å½¢å¼ãªã®ã§ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã‚‚åˆ©ç”¨å¯èƒ½")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_step3_merkle_root():
    """ã‚¹ãƒ†ãƒƒãƒ—3: Merkle Rootè¨ˆç®—"""

    print_step(3, "Merkle Rootï¼ˆæ”¹ã–ã‚“æ¤œçŸ¥ãƒãƒƒã‚·ãƒ¥ï¼‰ã‚’è¨ˆç®—")

    print("ğŸ” Merkle Rootã¨ã¯ï¼Ÿ")
    print("  â†’ ãƒ‡ãƒ¼ã‚¿å…¨ä½“ã®ã€ŒæŒ‡ç´‹ã€ã®ã‚ˆã†ãªã‚‚ã®")
    print("  â†’ 1æ–‡å­—ã§ã‚‚å¤‰æ›´ã•ã‚Œã‚‹ã¨ã€å…¨ãé•ã†å€¤ã«ãªã‚‹\n")

    print("ğŸ”§ è¨ˆç®—æ–¹æ³•:")
    print_box("""
1. JSONã‚’4096ãƒã‚¤ãƒˆã®ãƒãƒ£ãƒ³ã‚¯ã«åˆ†å‰²
   Chunk 1: {...éƒ¨åˆ†1...}
   Chunk 2: {...éƒ¨åˆ†2...}

2. å„ãƒãƒ£ãƒ³ã‚¯ã‚’SHA256ã§ãƒãƒƒã‚·ãƒ¥åŒ–
   Hash 1: a3f5b8c...
   Hash 2: d9e2f1a...

3. ãƒãƒƒã‚·ãƒ¥ã‚’ãƒ„ãƒªãƒ¼æ§‹é€ ã§çµåˆ
   Hash 1 + Hash 2 â†’ Merkle Root

4. æœ€çµ‚çš„ã«1ã¤ã®ãƒãƒƒã‚·ãƒ¥å€¤ã‚’å¾—ã‚‹
   Merkle Root: 43b10e78082bfd87c859ca55...
""", "Merkle Rootè¨ˆç®—ãƒ—ãƒ­ã‚»ã‚¹")

    print("\nğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ:")
    print("  âœ… ãƒ‡ãƒ¼ã‚¿ãŒæ”¹ã–ã‚“ã•ã‚Œã‚‹ã¨ã€Merkle RootãŒå¤‰ã‚ã‚‹")
    print("  âœ… å…ƒã®ãƒ‡ãƒ¼ã‚¿ã¨Merkle Rootã‚’æ¯”è¼ƒã™ã‚Œã°æ”¹ã–ã‚“ã‚’æ¤œçŸ¥")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_step4_ipfs():
    """ã‚¹ãƒ†ãƒƒãƒ—4: IPFSä¿å­˜"""

    print_step(4, "IPFSã«ä¿å­˜ï¼ˆåˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰")

    print("ğŸŒ IPFSã¨ã¯ï¼Ÿ")
    print("  â†’ InterPlanetary File Systemï¼ˆæƒ‘æ˜Ÿé–“ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼‰")
    print("  â†’ ä¸­å¤®ã‚µãƒ¼ãƒãƒ¼ãŒãªã„åˆ†æ•£å‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸")
    print("  â†’ ãƒ‡ãƒ¼ã‚¿ã¯ä¸–ç•Œä¸­ã®ãƒãƒ¼ãƒ‰ã«åˆ†æ•£ä¿å­˜\n")

    print_box("""
JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’IPFSã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
    â†“
CIDï¼ˆContent Identifierï¼‰ã‚’å–å¾—
    â†“
CID = bafybeigdyrzt5sfp7udm7hu76uh7y26nf...

ã“ã®CIDãŒã‚ã‚Œã°ã€ä¸–ç•Œä¸­ã®ã©ã®IPFSãƒãƒ¼ãƒ‰ã‹ã‚‰ã§ã‚‚
åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹ï¼
""", "IPFSä¿å­˜ãƒ—ãƒ­ã‚»ã‚¹")

    print("\nğŸ“ CIDï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„IDï¼‰ã®ç‰¹å¾´:")
    print("  âœ… ãƒ‡ãƒ¼ã‚¿ã®å†…å®¹ã‹ã‚‰è‡ªå‹•ç”Ÿæˆ")
    print("  âœ… åŒã˜ãƒ‡ãƒ¼ã‚¿ãªã‚‰å¿…ãšåŒã˜CID")
    print("  âœ… ãƒ‡ãƒ¼ã‚¿ãŒå¤‰ã‚ã‚Œã°CIDã‚‚å¤‰ã‚ã‚‹")
    print("  âœ… CIDã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–ã‚Šå‡ºã›ã‚‹")

    print("\nğŸ’¡ ãƒ¡ãƒªãƒƒãƒˆ:")
    print("  ãƒ»å˜ä¸€éšœå®³ç‚¹ãŒãªã„ï¼ˆåˆ†æ•£åŒ–ï¼‰")
    print("  ãƒ»ãƒ‡ãƒ¼ã‚¿ã®æ°¸ç¶šæ€§ï¼ˆèª°ã‹ãŒæŒã£ã¦ã„ã‚Œã°æ¶ˆãˆãªã„ï¼‰")
    print("  ãƒ»ä½ã‚³ã‚¹ãƒˆï¼ˆç„¡æ–™ã§ä½¿ãˆã‚‹å…¬é–‹ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼‰")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_step5_xrpl():
    """ã‚¹ãƒ†ãƒƒãƒ—5: XRPLè¨˜éŒ²"""

    print_step(5, "XRP Ledgerã«è¨˜éŒ²ï¼ˆãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ï¼‰")

    print("ğŸ“˜ XRP Ledgerã¨ã¯ï¼Ÿ")
    print("  â†’ é«˜é€Ÿãƒ»ä½ã‚³ã‚¹ãƒˆãªãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³")
    print("  â†’ 3-5ç§’ã§å–å¼•ç¢ºå®š")
    print("  â†’ æ‰‹æ•°æ–™ã¯0.000001 XRPï¼ˆç´„0.0001å††ï¼‰\n")

    print_box("""
XRPLãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ:
  ãƒ»é€é‡‘å…ˆ: è‡ªåˆ†è‡ªèº«ï¼ˆ1 drop = 0.000001 XRPï¼‰
  ãƒ»Memoãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è¨˜éŒ²:
    {
      "v": "a2a-0.1",
      "cid": "bafybeigdyrzt5...",
      "root": "43b10e78082bfd...",
      "sid": "session-abc123",
      "ts": 1730544060,
      "model": "gpt-5-nano"
    }
    â†“
ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚·ãƒ¥ã‚’å–å¾—:
  TX Hash: 1A2B3C4D5E6F...
    â†“
ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã«æ°¸ä¹…è¨˜éŒ²ï¼
""", "XRPLè¨˜éŒ²ãƒ—ãƒ­ã‚»ã‚¹")

    print("\nğŸ’¡ ãƒã‚¤ãƒ³ãƒˆ:")
    print("  âœ… CIDã¨Merkle RootãŒãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã«è¨˜éŒ²")
    print("  âœ… ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚‚è¨˜éŒ²ï¼ˆã„ã¤è¨˜éŒ²ã•ã‚ŒãŸã‹è¨¼æ˜ï¼‰")
    print("  âœ… èª°ã§ã‚‚æ¤œè¨¼å¯èƒ½ï¼ˆå…¬é–‹å°å¸³ï¼‰")
    print("  âœ… æ”¹ã–ã‚“ä¸å¯èƒ½ï¼ˆãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã®ç‰¹æ€§ï¼‰")

    print("\nğŸŒ å…¬é–‹å°å¸³ã§ç¢ºèª:")
    print("  https://testnet.xrpl.org/transactions/1A2B3C4D5E6F...")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_step6_verification():
    """ã‚¹ãƒ†ãƒƒãƒ—6: æ¤œè¨¼"""

    print_step(6, "æ¤œè¨¼ï¼ˆèª°ã§ã‚‚æ”¹ã–ã‚“ã‚’æ¤œçŸ¥ã§ãã‚‹ï¼‰")

    print("ğŸ” æ¤œè¨¼ãƒ—ãƒ­ã‚»ã‚¹:\n")

    print_box("""
1. XRPLã‹ã‚‰ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’å–å¾—
   TX Hash â†’ Transaction Data

2. Memoã‹ã‚‰CIDã¨Merkle Rootã‚’æŠ½å‡º
   Memo â†’ CID + Merkle Root

3. IPFSã‹ã‚‰CIDã‚’ä½¿ã£ã¦ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å–å¾—
   CID â†’ Trace JSON

4. å–å¾—ã—ãŸãƒˆãƒ¬ãƒ¼ã‚¹ã‹ã‚‰Merkle Rootã‚’å†è¨ˆç®—
   Trace JSON â†’ è¨ˆç®— â†’ æ–°ã—ã„Merkle Root

5. 2ã¤ã®Merkle Rootã‚’æ¯”è¼ƒ
   ä¿å­˜ã•ã‚ŒãŸRoot == è¨ˆç®—ã—ãŸRoot ?

6. çµæœ
   âœ“ ä¸€è‡´ â†’ æ”¹ã–ã‚“ãªã—ï¼
   âœ— ä¸ä¸€è‡´ â†’ æ”¹ã–ã‚“ã•ã‚ŒãŸï¼
""", "æ¤œè¨¼ãƒ•ãƒ­ãƒ¼")

    print("\nğŸ’¡ æ¤œè¨¼ã®ç‰¹å¾´:")
    print("  âœ… èª°ã§ã‚‚ã„ã¤ã§ã‚‚æ¤œè¨¼ã§ãã‚‹")
    print("  âœ… å…ƒã®ã‚·ã‚¹ãƒ†ãƒ ã«ã‚¢ã‚¯ã‚»ã‚¹ä¸è¦")
    print("  âœ… 1æ–‡å­—ã§ã‚‚å¤‰æ›´ã•ã‚Œã¦ã„ã‚Œã°æ¤œçŸ¥")
    print("  âœ… ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã§ã€Œã„ã¤è¨˜éŒ²ã•ã‚ŒãŸã‹ã€ã‚‚è¨¼æ˜")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_complete_flow():
    """å®Œå…¨ãªãƒ•ãƒ­ãƒ¼å›³"""

    print_header("ğŸ“Š å®Œå…¨ãªãƒ•ãƒ­ãƒ¼å›³", "=")

    print("""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     A2A Trace Anchoring                         â”‚
â”‚                         å®Œå…¨ãƒ•ãƒ­ãƒ¼                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    [1] AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ
         â†“
    ãƒ¦ãƒ¼ã‚¶ãƒ¼: "è©©ã‚’æ›¸ã„ã¦ãã ã•ã„"
         â†“
    AI: (ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã€æ¨è«–ã€è¿”ç­”)
         â†“
    å®Ÿè¡Œãƒ­ã‚°ï¼ˆmessagesï¼‰
         â†“
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [2] A2Aå½¢å¼ã«å¤‰æ›ï¼ˆTraceBuilderï¼‰
         â†“
    trace.json (æ¨™æº–å½¢å¼)
    {
      "session": {...},
      "events": [...],
      "usage": [...],
      "model": {...}
    }
         â†“
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [3] Merkle Rootè¨ˆç®—
         â†“
    ãƒãƒ£ãƒ³ã‚¯åŒ– â†’ ãƒãƒƒã‚·ãƒ¥åŒ– â†’ ãƒ„ãƒªãƒ¼æ§‹ç¯‰
         â†“
    Merkle Root: 43b10e78082bfd...
    ï¼ˆãƒ‡ãƒ¼ã‚¿ã®æŒ‡ç´‹ï¼‰
         â†“
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [4] IPFSä¿å­˜
         â†“
    trace.json ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
         â†“
    CIDå–å¾—: bafybeigdyrzt5...
    ï¼ˆä¸–ç•Œä¸­ã®IPFSãƒãƒ¼ãƒ‰ã‹ã‚‰å–å¾—å¯èƒ½ï¼‰
         â†“
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [5] XRPLè¨˜éŒ²
         â†“
    ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ
    Memo: {cid, root, timestamp, ...}
         â†“
    ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ã«æ°¸ä¹…è¨˜éŒ²
         â†“
    TX Hash: 1A2B3C4D5E6F...
         â†“
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    [6] æ¤œè¨¼ï¼ˆã„ã¤ã§ã‚‚ã€èª°ã§ã‚‚ï¼‰
         â†“
    TX Hash â†’ XRPL â†’ Memoå–å¾—
         â†“
    CID â†’ IPFS â†’ Traceå–å¾—
         â†“
    Merkle Rootå†è¨ˆç®—
         â†“
    æ¯”è¼ƒ â†’ âœ“ ä¸€è‡´ / âœ— æ”¹ã–ã‚“æ¤œçŸ¥

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çµæœ: AIã®å®Ÿè¡Œè¨˜éŒ²ãŒã€æ”¹ã–ã‚“ä¸å¯èƒ½ãªå½¢ã§æ°¸ä¹…ä¿å­˜ã•ã‚Œã‚‹ï¼       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
""")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_benefits():
    """ãƒ¡ãƒªãƒƒãƒˆã®èª¬æ˜"""

    print_header("âœ¨ ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ¡ãƒªãƒƒãƒˆ", "=")

    benefits = [
        ("ğŸ”’ æ”¹ã–ã‚“ä¸å¯èƒ½", "ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ + Merkle Rootã§å®Œå…¨æ€§ä¿è¨¼"),
        ("ğŸŒ èª°ã§ã‚‚æ¤œè¨¼å¯èƒ½", "å…¬é–‹å°å¸³ãªã®ã§ã€èª°ã§ã‚‚ã„ã¤ã§ã‚‚æ¤œè¨¼ã§ãã‚‹"),
        ("â° ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ã", "ã€Œã„ã¤ã€è¨˜éŒ²ã•ã‚ŒãŸã‹ã‚‚è¨¼æ˜ã§ãã‚‹"),
        ("ğŸ’¾ æ°¸ç¶šçš„ä¿å­˜", "IPFSã®åˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§æ¶ˆå¤±ãƒªã‚¹ã‚¯ãŒä½ã„"),
        ("ğŸ’° ä½ã‚³ã‚¹ãƒˆ", "XRPLæ‰‹æ•°æ–™ã¯ç´„0.0001å††ã€IPFSã¯ç„¡æ–™"),
        ("ğŸ“‹ æ¨™æº–åŒ–", "A2Aå½¢å¼ã§ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ã¨ã‚‚äº’æ›æ€§"),
        ("ğŸ” é€æ˜æ€§", "AIã®åˆ¤æ–­ãƒ—ãƒ­ã‚»ã‚¹ãŒå®Œå…¨ã«è¿½è·¡å¯èƒ½"),
        ("âš–ï¸ æ³•çš„è¨¼æ‹ ", "æ”¹ã–ã‚“ä¸å¯èƒ½ãªè¨˜éŒ²ã¨ã—ã¦ä½¿ãˆã‚‹")
    ]

    for emoji_title, description in benefits:
        print(f"\n{emoji_title}")
        print(f"  â†’ {description}")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_use_cases():
    """ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã®èª¬æ˜"""

    print_header("ğŸ¯ å®Ÿéš›ã®ä½¿ç”¨ä¾‹", "=")

    use_cases = [
        ("ğŸ¥ åŒ»ç™‚AI",
         "AIã«ã‚ˆã‚‹è¨ºæ–­è¨˜éŒ²ã‚’æ”¹ã–ã‚“ä¸å¯èƒ½ãªå½¢ã§ä¿å­˜",
         "åŒ»å¸«ã®è²¬ä»»ã€æ‚£è€…ã®æ¨©åˆ©ä¿è­·ã«å½¹ç«‹ã¤"),

        ("ğŸ’° é‡‘èAI",
         "AIãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®åˆ¤æ–­è¨˜éŒ²ã‚’å®Œå…¨ä¿å­˜",
         "è¦åˆ¶å½“å±€ã¸ã®å ±å‘Šã€ç›£æŸ»è¨¼è·¡ã¨ã—ã¦ä½¿ãˆã‚‹"),

        ("ğŸ›ï¸ æ³•å‹™AI",
         "å¥‘ç´„æ›¸ãƒ¬ãƒ“ãƒ¥ãƒ¼AIã®åˆ¤æ–­ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¨˜éŒ²",
         "æ³•çš„è¨¼æ‹ ã¨ã—ã¦æå‡ºå¯èƒ½"),

        ("ğŸ”¬ ç ”ç©¶AI",
         "AIã«ã‚ˆã‚‹å®Ÿé¨“çµæœã‚’æ”¹ã–ã‚“ä¸å¯èƒ½ã«è¨˜éŒ²",
         "ç ”ç©¶ã®å†ç¾æ€§ã€ä¸æ­£é˜²æ­¢ã«è²¢çŒ®"),

        ("ğŸ¤ ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¥‘ç´„",
         "AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®å–å¼•è¨˜éŒ²ã‚’ä¿å­˜",
         "è‡ªå‹•å¥‘ç´„ã€è‡ªå‹•æ±ºæ¸ˆã®è¨¼è·¡ã¨ã—ã¦"),

        ("ğŸ“ æ•™è‚²AI",
         "å­¦ç¿’æ”¯æ´AIã®æŒ‡å°å†…å®¹ã‚’è¨˜éŒ²",
         "æ•™è‚²åŠ¹æœã®æ¸¬å®šã€èª¬æ˜è²¬ä»»ã«ä½¿ãˆã‚‹")
    ]

    for icon_title, description, benefit in use_cases:
        print(f"\n{icon_title}")
        print(f"  ğŸ“ {description}")
        print(f"  ğŸ’¡ {benefit}")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ç¶šè¡Œ...]")


def demo_how_to_run():
    """å®Ÿè¡Œæ–¹æ³•ã®èª¬æ˜"""

    print_header("ğŸš€ å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚ˆã†ï¼", "=")

    print("""
ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯3ã¤ã®ãƒ•ã‚§ãƒ¼ã‚ºãŒã‚ã‚Šã¾ã™:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 1: ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ã®ã¿ï¼ˆIPFS/XRPLä¸è¦ï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  $ uv run demo_haiku_trace.py

  â†’ A2Aå½¢å¼ã«å¤‰æ›ã€Merkle Rootè¨ˆç®—ã€JSONä¿å­˜
  â†’ ã™ãã«è©¦ã›ã‚‹ï¼


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 2: IPFSçµ±åˆï¼ˆè¦: IPFSãƒãƒ¼ãƒ‰ï¼‰                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1. IPFSãƒãƒ¼ãƒ‰ã‚’èµ·å‹•:
     $ docker run -d --name ipfs -p 5001:5001 -p 8080:8080 ipfs/kubo

  2. ãƒ‡ãƒ¢å®Ÿè¡Œ:
     $ uv run demo_haiku_ipfs.py

  â†’ IPFSã«ä¿å­˜ã€CIDå–å¾—ã€æ¤œè¨¼


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase 3: å®Œå…¨ãªã‚¢ãƒ³ã‚«ãƒªãƒ³ã‚°ï¼ˆè¦: IPFS + XRPLï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  1. IPFSãƒãƒ¼ãƒ‰ã‚’èµ·å‹•:
     $ docker run -d --name ipfs -p 5001:5001 -p 8080:8080 ipfs/kubo

  2. XRPL Testnetã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å–å¾—:
     https://xrpl.org/xrp-testnet-faucet.html
     â†’ "Generate"ã‚’ã‚¯ãƒªãƒƒã‚¯
     â†’ Secretã‚’.envãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ 

  3. ãƒ‡ãƒ¢å®Ÿè¡Œ:
     $ uv run demo_full_anchor.py

  â†’ å®Œå…¨ãªãƒ•ãƒ­ãƒ¼: IPFSä¿å­˜ â†’ XRPLè¨˜éŒ² â†’ æ¤œè¨¼


ğŸ“š è©³ç´°ã¯README.mdã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼
""")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦çµ‚äº†...]")


def main():
    """ãƒ¡ã‚¤ãƒ³é–¢æ•°"""

    print_header("ğŸ“ A2A Trace Anchoring ã‚·ã‚¹ãƒ†ãƒ  è§£èª¬ãƒ‡ãƒ¢", "#")
    print("\nã“ã®ãƒ‡ãƒ¢ã¯ã€A2Aãƒˆãƒ¬ãƒ¼ã‚¹ã‚¢ãƒ³ã‚«ãƒªãƒ³ã‚°ã®ä»•çµ„ã¿ã‚’")
    print("ã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜ã—ã¾ã™ã€‚")
    print("\nå„ã‚¹ãƒ†ãƒƒãƒ—ã§Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦é€²ã‚“ã§ãã ã•ã„ã€‚")

    input("\n[Enterã‚­ãƒ¼ã‚’æŠ¼ã—ã¦é–‹å§‹...]")

    # èª¬æ˜
    demo_explanation()

    # ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã®èª¬æ˜
    demo_step1_agent_execution()
    demo_step2_a2a_format()
    demo_step3_merkle_root()
    demo_step4_ipfs()
    demo_step5_xrpl()
    demo_step6_verification()

    # å®Œå…¨ãªãƒ•ãƒ­ãƒ¼
    demo_complete_flow()

    # ãƒ¡ãƒªãƒƒãƒˆ
    demo_benefits()

    # ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹
    demo_use_cases()

    # å®Ÿè¡Œæ–¹æ³•
    demo_how_to_run()

    # çµ‚äº†
    print_header("ğŸ‰ ãƒ‡ãƒ¢å®Œäº†ï¼", "#")
    print("\nå®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼")
    print("è³ªå•ãŒã‚ã‚Œã°ã€README.mdã‚„ä»•æ§˜æ›¸ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚\n")


if __name__ == "__main__":
    main()
